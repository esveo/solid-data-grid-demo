import{i as $,c as B,t as b,a as v,S as ne,d as fe,b as f,D as re,m as U,e as N,f as w,o as Be,F as D,g as j,p as be,h as ve,j as Ie,u as we,s as oe,k as ze,l as ye,r as Ne,n as Ae,q as De,v as Fe,w as Oe,x as Ee,y as Ge,z as ke}from"./vendor.0f925a36.js";const Pe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};Pe();function G(e){return function(...n){return n.filter(r=>typeof r=="string").map(r=>`${e}${r}`).join(" ")}}const Z="solid-data-grid",Ke=b("<div><span> </span></div>");function ee(e){return(()=>{const t=Ke.cloneNode(!0),n=t.firstChild,r=n.firstChild;return $(n,()=>e.content?.toLocaleString(void 0,{minimumFractionDigits:e.decimals,maximumFractionDigits:e.decimals}),r),$(n,()=>e.suffix,null),B(o=>{const i=ue("__number-renderer"),s=ue("__number-renderer--content");return i!==o._v$&&(t.className=o._v$=i),s!==o._v$2&&(n.className=o._v$2=s),o},{_v$:void 0,_v$2:void 0}),t})()}const ue=G(Z);function Te(e,t){const n=[];for(let r=e;r<t;r++)n.push(r);return n}function H(e){return e[e.length-1]}function Re(e,t){const n={};return e.forEach((r,o,i)=>{n[t(r,o,i)]=r}),n}function Le(e,t){const n={};for(const[r,o]of Object.entries(e))n[r]=t(o,r,e);return n}function We(e,t){const n={};for(const r of e){const o=t(r),i=Array.isArray(o)?o:[o];for(const s of i){const c=String(s??"---");n[c]||(n[c]=[]),n[c].push(r)}}return n}function ie(e,t=", "){return Array.isArray(e)?e.join(t):e}function Me(e){return Array.isArray(e)?e:[e]}function je(e,t){let n=0;for(const r of e)n+=t(r);return n/e.length}const He=b("<div><span></span></div>");function Ve(e){return(()=>{const t=He.cloneNode(!0),n=t.firstChild;return $(n,()=>e.content),B(r=>{const o=ce("__string-renderer"),i=ce("__string-renderer--content");return o!==r._v$&&(t.className=r._v$=o),i!==r._v$2&&(n.className=r._v$2=i),r},{_v$:void 0,_v$2:void 0}),t})()}const ce=G(Z);function q(e){return v(ne,{get when(){return typeof e.content=="number"},get fallback(){return v(Ve,{get content(){return e.content}})},get children(){return v(ee,{get content(){return e.content}})}})}const Ue=b("<div><button></button><span> (<!>)</span></div>"),Ze=b("<div></div>");function qe(e){const t=()=>e.context().input.showAllRow?.()?0:-1,n=f(()=>e.node.path.length),r=()=>e.context().state.groupByColumnKeys[n()-1],o=()=>e.context().derivations.columnByKey()[r()??""],i=()=>e.context().isGroupExpanded(e.node);return(()=>{const s=Ue.cloneNode(!0),c=s.firstChild,d=c.nextSibling,m=d.firstChild,l=m.nextSibling;return l.nextSibling,c.$$click=()=>e.context().toggleGroupExpansion(e.node),$(c,()=>i()?"V":">"),$(s,v(ne,{get when(){return o()},get fallback(){return v(q,{content:"All"})},get children(){return v(re,{get component(){return o().Item},get context(){return e.context},get node(){return{item:e.node.items()[0],path:[],pathKey:"",type:"ITEM_NODE"}},get template(){return o()}})}}),d),$(d,()=>e.node.items().length,l),B(u=>{const g=te("__title-renderer"),p=n()+t(),x=te("__title-renderer-expansion-toggle");return g!==u._v$&&(s.className=u._v$=g),p!==u._v$2&&s.style.setProperty("--level",u._v$2=p),x!==u._v$3&&(c.className=u._v$3=x),u},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()}function Je(e){const t=()=>e.context().input.showAllRow?.()?0:-1,n=f(()=>{const r=e.node.path.length;return r+1+(r>0?2:0)});return(()=>{const r=Ze.cloneNode(!0);return $(r,v(q,{get content(){return e.content??ie(e.template.valueFromItem({...e,item:e.node.item}))}})),B(o=>{const i=te("__title-renderer"),s=n()+t();return i!==o._v$4&&(r.className=o._v$4=i),s!==o._v$5&&r.style.setProperty("--level",o._v$5=s),o},{_v$4:void 0,_v$5:void 0}),r})()}const te=G(Z);function Xe(e){return{key:"Title",valueFromItem:t=>e(t.item),valueFromGroup:t=>H(t.node.path)??"All",Item:Je,Group:qe,frozen:"LEFT",columnWidth:300}}fe(["click"]);function Ye(e,t){const n=e.valueFromGroup??(e.aggregateItems?o=>o.node.aggregationsByColumnKey()[e.key]():void 0);return{...e,title:e.title??e.key,columnWidth:e.columnWidth??200,resizable:e.resizable??!0,Item:e.Item??et,Group:e.Group??tt,groupable:e.groupable??!1,frozen:e.frozen??"UNFROZEN",sortBy:e.sortBy??e.valueFromItem,sortable:e.sortable??!0,sortGroupBy:e.sortGroupBy??n,valueFromGroup:n}}function Qe(e,t){return f(U(e,t))}function et(e){return v(q,{get content(){return ie(e.template.valueFromItem({...e,item:e.node.item}))}})}function tt(e){return v(q,{get content(){return ie(e.template.valueFromGroup?.(e))}})}function nt(e){return{renderFilter:()=>null,parseFilterState:t=>new Set(t),doesItemMatchFilter:t=>{const n=e??t.template.valueFromItem;return Me(n(t)).some(o=>t.state.has(o))}}}function rt(e){return Object.keys(e)}function he(e){throw console.error("Should never be called, but was called with:",e),new Error("Should never be called")}function ot(e){return!!e}function ge(e){const[t,n]=N({width:0,height:0});return w(()=>{const r=e();if(!r)return;const o=new ResizeObserver(i=>{const[s]=i,{width:c,height:d}=s.contentRect;n({width:Math.floor(c),height:Math.floor(d)})});o.observe(r),Be(()=>{o.unobserve(r),o.disconnect()})}),t}function it(e){if(e.items.length===0)return[];const t=Math.floor(e.startOfVisibleArea),n=Math.ceil(e.sizeOfVisibleArea),r=t+n;let o=0,i=0;for(;i<e.items.length;i++){const d=e.items[i],m=e.getItemDimensionRange(d);if(m.start+m.size>t){o=i;break}}let s=e.items.length-1;for(;i<e.items.length;i++){const d=e.items[i];if(e.getItemDimensionRange(d).start>r){s=i-1;break}}const c=[];for(let d=o;d<=s;d++)c.push(e.items[d]);return c}function ae(e){const t=()=>e.frozenCountAtStart()??0,n=()=>e.indexedItems().length-(e.frozenCountAtEnd()??0)-1,r=f(()=>{if(!e.frozenCountAtStart()||!e.indexedItems().length)return 0;const u=e.itemDimensions()[0]?.start??0;return(e.itemDimensions()[e.frozenCountAtStart()-1]?.end??0)-u}),o=f(()=>{if(!e.frozenCountAtEnd()||!e.indexedItems().length)return 0;const u=e.itemDimensions()[n()+1]?.start??0;return(e.itemDimensions()[e.indexedItems().length-1]?.end??0)-u}),i=()=>e.availableSize()-r()-o(),s=f(()=>{if(!e.indexedItems().length)return 0;const u=e.itemDimensions()[t()]?.start??0;return(e.itemDimensions()[n()]?.end??0)-u}),c=f(()=>e.indexedItems().slice(0,t())),d=f(()=>e.indexedItems().slice(t(),n()+1)),m=f(()=>e.indexedItems().slice(n()+1)),l=f(()=>it({getItemDimensionRange:u=>e.itemDimensions()[u.index()]??{start:0,end:0,size:0},items:d(),sizeOfVisibleArea:i(),startOfVisibleArea:e.scrollPosition()+r()}));return{firstFrozen:{indexedItems:c,visibleIndexedItems:c,areaSize:r,totalItemSize:r,positionOffset:()=>0,scrollPosition:()=>0},unfrozen:{areaSize:i,totalItemSize:s,indexedItems:d,visibleIndexedItems:l,positionOffset:r,scrollPosition:e.scrollPosition},secondFrozen:{indexedItems:m,visibleIndexedItems:m,areaSize:o,totalItemSize:o,positionOffset:()=>r()+s(),scrollPosition:()=>0}}}const _e="solid-virtualized-grid";function de(e,t){return e.map(n=>({size:t(n),start:0,end:0})).map(st)}function st(e,t,n){const r=n[t-1]??{size:0,start:0};return e.start=r.start+r.size,e.end=e.start+e.size,e}const lt=b("<div><div></div></div>");function ut(e){let t;return w(()=>{t.scrollTop=e.vertical.scrollPosition(),t.scrollLeft=e.horizontal.scrollPosition()}),(()=>{const n=lt.cloneNode(!0),r=n.firstChild,o=t;return typeof o=="function"?o(n):t=n,$(n,v(D,{get each(){return e.vertical.visibleIndexedItems()},children:i=>v(D,{get each(){return e.horizontal.visibleIndexedItems()},children:s=>{const c=()=>e.columnDimensions[s.index()],d=()=>e.rowDimensions[i.index()];return e.cell({columnIndex:s.index,rowIndex:i.index,column:s.item,row:i.item,style:()=>({position:"absolute",left:c().start-e.horizontal.positionOffset()+"px",top:d().start-e.vertical.positionOffset()+"px",width:c().size+"px",height:d().size+"px"})})}})}),r),B(i=>{const s=ct("__grid-area"),c=e.horizontal.areaSize()+"px",d=e.vertical.areaSize()+"px",m=e.horizontal.totalItemSize+"px",l=e.vertical.totalItemSize+"px";return s!==i._v$&&(n.className=i._v$=s),c!==i._v$2&&n.style.setProperty("width",i._v$2=c),d!==i._v$3&&n.style.setProperty("height",i._v$3=d),m!==i._v$4&&r.style.setProperty("width",i._v$4=m),l!==i._v$5&&r.style.setProperty("height",i._v$5=l),i},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})()}const ct=G(_e);function me(e){return U(e,(t,n)=>({item:t,index:n}))}const at=b("<div><div></div><div><div></div></div></div>");function dt(e){const[t,n]=N(0),[r,o]=N(0);let i;const s=ge(()=>i),c=f(me(()=>e.columns)),d=f(me(()=>e.rows)),m=f(()=>de(e.columns,e.getColumnWidth)),l=f(()=>de(e.rows,e.getRowHeight)),u=ae({availableSize:()=>s().width,indexedItems:c,itemDimensions:m,frozenCountAtStart:()=>e.frozenAreas?.left,frozenCountAtEnd:()=>e.frozenAreas?.right,scrollPosition:t}),g=ae({availableSize:()=>s().height,indexedItems:d,itemDimensions:l,frozenCountAtStart:()=>e.frozenAreas?.top,frozenCountAtEnd:()=>e.frozenAreas?.bottom,scrollPosition:r}),p=Object.values(g).flatMap(x=>Object.values(u).map(_=>v(ut,{get cell(){return e.cell},get columnDimensions(){return m()},get rowDimensions(){return l()},horizontal:_,vertical:x})));return(()=>{const x=at.cloneNode(!0),_=x.firstChild,S=_.nextSibling,z=S.firstChild;_.addEventListener("wheel",y=>{y.preventDefault(),i.scrollTop+=y.deltaY,i.scrollLeft+=y.deltaX}),_.style.setProperty("position","absolute"),$(_,p),S.addEventListener("scroll",y=>{j(()=>{o(y.target.scrollTop),n(y.target.scrollLeft)})});const F=i;return typeof F=="function"?F(S):i=S,B(y=>{const C=Y("__grid-container"),I=e.width+"px",k=e.height+"px",O=Y("__cell-area-container"),L=s().width+"px",P=s().height+"px",W=Y("__scroll-bar-dummy"),E=(H(m())?.end??0)+"px",M=(H(l())?.end??0)+"px";return C!==y._v$&&(x.className=y._v$=C),I!==y._v$2&&x.style.setProperty("width",y._v$2=I),k!==y._v$3&&x.style.setProperty("height",y._v$3=k),O!==y._v$4&&(_.className=y._v$4=O),L!==y._v$5&&_.style.setProperty("width",y._v$5=L),P!==y._v$6&&_.style.setProperty("height",y._v$6=P),W!==y._v$7&&(S.className=y._v$7=W),E!==y._v$8&&z.style.setProperty("width",y._v$8=E),M!==y._v$9&&z.style.setProperty("height",y._v$9=M),y},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0}),x})()}const Y=G(_e);function mt(e){return t(e.items,e.groupByColumns,[]);function t(n,r,o){const i=f(()=>r()[0]),s=f(()=>vt({sortByState:e.sortBy(),columnToGroupNodesBy:i()})),c=f(()=>i()?.valueFromItem),d=f(()=>r().slice(1)),m=f(()=>!!i()),l=f(()=>m()?We(n(),_=>c()({context:e.context,item:_,template:i()})):null),u=f(()=>{const _=l();return _?Object.keys(_):null}),g=f(()=>{if(!m())return n().map(C=>({type:"ITEM_NODE",item:C,path:o,pathKey:V(o)}));const S=u().map(C=>{const I=f(()=>l()[C]);return t(I,d,[...o,C])()}),{sortDirectionFactor:z,sortingFunction:F}=s();return S.map(C=>({node:C,sortingCriteria:F?.({context:e.context,template:i(),node:C})})).sort((C,I)=>C.sortingCriteria<I.sortingCriteria?-1*z:I.sortingCriteria<C.sortingCriteria?1*z:0).map(C=>C.node)}),p=U(e.columnsWithAggregations,_=>({column:_,aggregation:f(()=>_.aggregateItems(n()))})),x=f(()=>{const _={};for(const S of p())_[S.column.key]=S.aggregation;return _});return f(()=>({type:"GROUP_NODE",path:o,pathKey:V(o),items:n,childNodes:g,aggregationsByColumnKey:x}))}}function ft(e,t,n){return f(()=>o(e(),[],t(),n?.()));function o(i,s,c,d){if(d&&s.push(i),!(!d||i.pathKey in c))return s;if(i.type==="GROUP_NODE")for(const l of i.childNodes())o(l,s,c,!0);return s}}function V(e){return e.join("//")}function vt(e){const t=e.sortByState?.column.valueFromGroup,n=e.columnToGroupNodesBy===e.sortByState?.column||t?e.sortByState?.column.sortGroupBy:void 0,r=e.columnToGroupNodesBy?.sortGroupBy,o=n??r??yt,i=n&&e.sortByState?.direction==="DESC"?-1:1;return{sortingFunction:o,sortDirectionFactor:i}}function yt(e){return H(e.node.path)??""}class ht{constructor(t){this.input=t;const[n,r]=this.buildStore();this.state=n,this.updateStore=o=>r(be(o)),this.derivations=this.deriveData(),this.initState()}initState(){const t=this.derivations.columns();this.updateStore(n=>{for(const r of t)n.columnKeysByArea[r.frozen].push(r.key)})}buildStore(){const t=this.input.initialState,n={columnKeysByArea:{LEFT:[],RIGHT:[],UNFROZEN:[]},columnWidthByColumnKey:{},filterStateByColumnKey:{},sortBy:null,groupByColumnKeys:[],expandedPaths:{}};return Object.assign(n,t),ve(n)}deriveData(){function t(){}return t.columns=f(U(this.input.columnDefinitions,n=>Ye(n))),t.columnByKey=f(()=>Re(t.columns(),n=>n.key)),t.columnsByArea=f(()=>{const n=t.columnByKey();return Le(this.state.columnKeysByArea,r=>r.map(o=>n[o]))}),t.columnsWidthAggregations=f(()=>t.columns().filter(n=>n.aggregateItems)),t.getColumnWidth=n=>this.state.columnWidthByColumnKey[n]??this.derivations.columnByKey()[n]?.columnWidth??200,t.sortBy=f(()=>{const n=this.state.sortBy;if(!n)return;const r=t.columnByKey()[n.columnKey];if(!!r)return{column:r,direction:n.direction}}),t.activeFilters=f(()=>{const n=this.state.filterStateByColumnKey,r=t.columnByKey();return Object.keys(n).map(i=>{const s=r[i];if(!s||!s.filter)return null;const c=n[i],d=s.filter.parseFilterState??(m=>m);return{template:s,filterState:c,parsedFilterState:d(c)}}).filter(ot).filter(i=>!!i.template)}),t.filteredItems=f(()=>{const n=t.activeFilters();return n.length===0?this.input.items():this.input.items().filter(r=>n.every(o=>o.template.filter?.doesItemMatchFilter({item:r,state:o.parsedFilterState,context:()=>this,template:o.template})))}),t.sortedItems=f(()=>{const n=t.sortBy();if(!n)return t.filteredItems();const r=n.column.sortBy,o=n.direction==="ASC"?-1:1;return t.filteredItems().map(s=>({sortCriteria:r({item:s,context:()=>this,template:n.column}),item:s})).sort((s,c)=>s.sortCriteria<c.sortCriteria?o:s.sortCriteria>c.sortCriteria?o*-1:0).map(s=>s.item)}),t.groupByColumns=f(()=>{const n=t.columnByKey();return this.state.groupByColumnKeys.map(r=>n[r]).filter(r=>!!r?.groupable)}),t.itemTree=mt({context:()=>this,groupByColumns:t.groupByColumns,sortBy:t.sortBy,items:t.sortedItems,columnsWithAggregations:t.columnsWidthAggregations}),t.flatTree=ft(t.itemTree,()=>this.state.expandedPaths,this.input.showAllRow),t}resizeColumn(t,n){const r=Math.max(n,60);this.updateStore(o=>{o.columnWidthByColumnKey[t.key]=r})}sortByColumn(t,n="ASC"){const r=this.derivations.columnByKey()[t];this.updateStore(o=>{if(!r){o.sortBy=null;return}o.sortBy||(o.sortBy={columnKey:t,direction:n}),o.sortBy.columnKey=t,o.sortBy.direction=n})}moveColumn(t,n,r){this.updateStore(o=>{for(const c of rt(o.columnKeysByArea))o.columnKeysByArea[c]=o.columnKeysByArea[c].filter(d=>d!==t);const i=o.columnKeysByArea[n];let s=r?i.indexOf(r):-1;s===-1&&(s=i.length),i.splice(s,0,t)})}groupBy(t,n){this.updateStore(r=>{r.groupByColumnKeys=r.groupByColumnKeys.filter(i=>i!==t);let o=n?r.groupByColumnKeys.indexOf(n):-1;o===-1&&(o=r.groupByColumnKeys.length),r.groupByColumnKeys.splice(o,0,t)})}setFilter(t,n){this.updateStore(r=>{n===null?delete r.filterStateByColumnKey[t]:r.filterStateByColumnKey[t]=n})}removeFromGroups(t){this.updateStore(n=>{n.groupByColumnKeys=n.groupByColumnKeys.filter(r=>r!==t)})}toggleGroupExpansion(t){const n=V(t.path);this.updateStore(r=>{n in r.expandedPaths?delete r.expandedPaths[n]:r.expandedPaths[n]=!0})}isGroupExpanded(t){return V(t.path)in this.state.expandedPaths}}const $e=Ie();function gt(e){return v($e.Provider,{get value(){return e.value},get children(){return e.children}})}function R(){const e=we($e);if(!e)throw new Error("No datagrid provider found");return e}const se=b("<div></div>"),_t=b("<div><span></span></div>");function $t(e){switch(e.row.type){case"HEADER_ROW":return v(pt,e);case"ITEM_NODE":return v(xt,e);case"GROUP_NODE":return v(Ct,e);default:he(e.row)}}function pt(e){const t=R(),n=()=>t.derivations.getColumnWidth(e.column.key),[r,o]=N(),[i,s]=N(),c=()=>{const u=r(),g=i();return!u||!g?0:g.x-u.x};function d(u){u.preventDefault(),o({x:u.clientX,initialColumnWidth:n()}),document.addEventListener("pointermove",m),document.addEventListener("pointerup",l)}function m(u){s({x:u.clientX});const g=(r()?.initialColumnWidth??0)+c();t.resizeColumn(e.column,g)}function l(u){o(void 0),s(void 0),document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",l)}return(()=>{const u=_t.cloneNode(!0),g=u.firstChild;return $(u,v(ne,{get when(){return e.column.resizable},get children(){const p=se.cloneNode(!0);return p.$$pointerdown=d,B(()=>p.className=T("__header-cell-resize-handle")),p}}),g),$(g,()=>e.column.title),B(p=>{const x=T("__cell","__header-cell"),_=e.style(),S=T("__header-cell--title");return x!==p._v$&&(u.className=p._v$=x),p._v$2=oe(u,_,p._v$2),S!==p._v$3&&(g.className=p._v$3=S),p},{_v$:void 0,_v$2:void 0,_v$3:void 0}),u})()}function xt(e){const t=R();return(()=>{const n=se.cloneNode(!0);return $(n,v(re,{get component(){return e.column.Item},get node(){return e.row},get template(){return e.column},context:()=>t})),B(r=>{const o=e.style(),i=T("__cell","__body-cell","__item-cell");return r._v$4=oe(n,o,r._v$4),i!==r._v$5&&(n.className=r._v$5=i),r},{_v$4:void 0,_v$5:void 0}),n})()}function Ct(e){const t=R();return(()=>{const n=se.cloneNode(!0);return $(n,v(re,{get component(){return e.column.Group},get node(){return e.row},get template(){return e.column},context:()=>t})),B(r=>{const o=e.style(),i=T("__cell","__body-cell","__group-cell");return r._v$6=oe(n,o,r._v$6),i!==r._v$7&&(n.className=r._v$7=i),r},{_v$6:void 0,_v$7:void 0}),n})()}const T=G(Z);fe(["pointerdown"]);N(200);function St(e){const t=R(),n={type:"HEADER_ROW"},r=f(()=>[n,...t.derivations.flatTree()]),o=t.derivations.columnsByArea;return v(dt,{get rows(){return r()},get columns(){return[...t.derivations.columnsByArea().LEFT,...t.derivations.columnsByArea().UNFROZEN,...t.derivations.columnsByArea().RIGHT].filter(Boolean)},getColumnWidth:i=>t.derivations.getColumnWidth(i.key),getRowHeight:i=>{switch(i.type){case"HEADER_ROW":return t.input.headerHeight??50;case"ITEM_NODE":return t.input.itemRowHeight??30;case"GROUP_NODE":return t.input.groupRowHeight??30;default:he(i)}},get frozenAreas(){return{top:1,left:o().LEFT.length,right:o().RIGHT.length}},get height(){return e.height},get width(){return e.width},cell:i=>v($t,i)})}function Bt(){return{buildColumns(e){return()=>e.flatMap(t=>typeof t=="function"?t():t)},buildContext(e){return new ht(e)},useContext(){return R()}}}const bt=b("<div></div>");function It(e){const[t,n]=N(),[r,o]=N(),i=ge(r);return w(()=>{const s=t();o(s?.parentElement??void 0)}),[ze(()=>ye(()=>e.children(i))),(()=>{const s=bt.cloneNode(!0);return n(s),s})()]}async function wt(e){let t=performance.now();for(;;){const n=e.next();if(n.done)return n.value;performance.now()-t>10&&(await Nt(),t=performance.now())}}const zt=window.requestIdleCallback??requestAnimationFrame;function Nt(){return new Promise(e=>{zt(()=>{e()})})}function At(e){return{id:e,name:Ne(),income:Ae({min:2e4,max:2e6}),dateOfBirth:De({from:new Date("1950-01-01"),to:new Date}),favoriteTeam:Fe(),country:Oe()}}async function Dt(e){return wt(Ft(e))}function*Ft(e){const t=[],r=Math.ceil(e/100);for(let o=0;o<r;o++){const s=o===r-1?Math.min(100,e%100||100):100;for(let c=0;c<s;c++){const d=o*100+c;t.push(At(d))}yield}return t}const Ot=b("<button>\u{1F4BE}</button>"),Et=b('<div><div><h1>Solid data grid <small>(no touch support for now)</small></h1><label>Select data: <select value="100_10"></select></label> <label>Pinned cols: <select></select></label> <label>Groups: <select></select></label> <label>Sorting: <select></select></label> <label>Country filter: <select><optgroup><option>All Countries</option></optgroup><optgroup></optgroup></select></label></div><div></div></div>'),Gt=b("<option> rows - <!> columns</option>"),Q=b("<option></option>"),kt=b("<option> </option>");Ee("THIS IS MY SEED!");function Pt(){const e=[{rows:100,columns:10},{rows:1e3,columns:100},{rows:1e4,columns:100},{rows:1e5,columns:100}],t=[1,2,3],n=[[],["Country"],["Country","Age group"]],r=[{key:"Title",direction:"ASC"},{key:"Title",direction:"DESC"},{key:"Income",direction:"ASC"},{key:"Income",direction:"DESC"}],[o,i]=ve({persons:null,dataOption:e[0],pinnedColumns:1,countryFilter:null,groupBy:n[0],sortBy:r[0]}),s=f(()=>[...new Set(o.persons?.map(l=>l.country))].sort());w(()=>{Dt(o.dataOption.rows).then(l=>{i(Ge({...o,persons:l}))})}),w(()=>{const l=o.dataOption.columns;j(()=>{for(let u=0;u<l;u++)m.moveColumn("Dummy column "+u,"UNFROZEN")})}),w(()=>{const l=o.pinnedColumns;j(()=>{const u=m.derivations.columns().slice(0,l),g=m.derivations.columns().slice(l,-l),p=m.derivations.columns().slice(-l);for(const x of u)m.moveColumn(x.key,"LEFT");for(const x of g)m.moveColumn(x.key,"UNFROZEN");for(const x of p)m.moveColumn(x.key,"RIGHT")})}),w(()=>{const l=o.groupBy,u=ye(m.derivations.groupByColumns);j(()=>{for(const g of u)m.removeFromGroups(g.key);for(const g of l)m.groupBy(g)})}),w(()=>{m.sortByColumn(o.sortBy.key,o.sortBy.direction)}),w(()=>{m.setFilter("Country",o.countryFilter?[o.countryFilter]:null)});const c=Bt(),d=c.buildColumns([{...Xe(l=>l.name),key:"Title"},{key:"Income",valueFromItem:l=>l.item.income,Item:l=>v(ee,{get content(){return l.node.item.income},decimals:0}),Group:l=>v(ee,{get content(){return l.node.aggregationsByColumnKey().Income()},decimals:0,suffix:"$"}),aggregateItems:l=>je(l,u=>u.income),columnWidth:200},{key:"Country",valueFromItem:l=>l.item.country,filter:nt(),groupable:!0},Qe(()=>Te(0,o.dataOption.columns),l=>({key:"Dummy column "+l,valueFromItem:u=>u.template.key})),{key:"Date of Birth",valueFromItem:l=>l.item.dateOfBirth.toLocaleDateString(),sortBy:l=>l.item.dateOfBirth},{key:"Age group",valueFromItem:l=>l.item.dateOfBirth.getFullYear()>1992?"Preeetty old":"Quite young",groupable:!0},{key:"actions",title:"",valueFromItem:()=>null,Item:l=>Ot.cloneNode(!0),columnWidth:60,resizable:!1,frozen:"RIGHT"}]),m=c.buildContext({columnDefinitions:d,gridKey:"person-grid",items:()=>o.persons??[],initialState:{groupByColumnKeys:["Country","Age group"]},showAllRow:()=>!1});return v(gt,{value:m,get children(){const l=Et.cloneNode(!0),u=l.firstChild,g=u.firstChild,p=g.nextSibling,x=p.firstChild,_=x.nextSibling,S=p.nextSibling,z=S.nextSibling,F=z.firstChild,y=F.nextSibling,C=z.nextSibling,I=C.nextSibling,k=I.firstChild,O=k.nextSibling,L=I.nextSibling,P=L.nextSibling,W=P.firstChild,E=W.nextSibling,M=P.nextSibling,pe=M.nextSibling,xe=pe.firstChild,J=xe.nextSibling,Ce=J.firstChild,Se=Ce.nextSibling,X=u.nextSibling;return l.style.setProperty("height","100%"),l.style.setProperty("display","flex"),l.style.setProperty("flex-direction","column"),l.style.setProperty("overflow","hidden"),u.style.setProperty("flex","0 0 auto"),u.style.setProperty("margin-bottom","1rem"),_.addEventListener("change",a=>i("dataOption",e.find(h=>[h.rows,h.columns].join("_")===a.currentTarget.value))),$(_,v(D,{each:e,children:a=>(()=>{const h=Gt.cloneNode(!0),A=h.firstChild,K=A.nextSibling;return K.nextSibling,$(h,()=>Intl.NumberFormat(void 0,{useGrouping:!0}).format(a.rows),A),$(h,()=>a.columns,K),B(()=>h.value=[a.rows,a.columns].join("_")),h})()})),y.addEventListener("change",a=>i("pinnedColumns",Number(a.currentTarget.value))),$(y,v(D,{each:t,children:a=>(()=>{const h=Q.cloneNode(!0);return h.value=a,$(h,a),h})()})),O.addEventListener("change",a=>i("groupBy",a.currentTarget.value.split("-"))),$(O,v(D,{each:n,children:a=>(()=>{const h=Q.cloneNode(!0);return $(h,()=>a.join(" > ")||"No groups"),B(()=>h.value=a.join("-")),h})()})),E.addEventListener("change",a=>i("sortBy",JSON.parse(a.currentTarget.value))),$(E,v(D,{each:r,children:a=>(()=>{const h=kt.cloneNode(!0),A=h.firstChild;return $(h,()=>a.key,A),$(h,()=>a.direction,null),B(()=>h.value=JSON.stringify(a)),h})()})),J.addEventListener("change",a=>i("countryFilter",a.currentTarget.value||null)),$(Se,v(D,{get each(){return s()},children:a=>(()=>{const h=Q.cloneNode(!0);return h.value=a,$(h,a),h})()})),X.style.setProperty("flex","1 1 auto"),X.style.setProperty("overflow","hidden"),$(X,v(It,{children:a=>v(St,{get width(){return a().width},get height(){return a().height}})})),B(a=>{const h=o.pinnedColumns,A=o.groupBy.join("-"),K=JSON.stringify(o.sortBy),le=o.countryFilter??"";return h!==a._v$&&(y.value=a._v$=h),A!==a._v$2&&(O.value=a._v$2=A),K!==a._v$3&&(E.value=a._v$3=K),le!==a._v$4&&(J.value=a._v$4=le),a},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l}})}ke(()=>v(Pt,{}),document.getElementById("root"));
